# Technical Test
# User List

<img align="center" alt="Laravel" height="30" width="40" src="https://raw.githubusercontent.com/devicons/devicon/1119b9f84c0290e0f0b38982099a2bd027a48bf1/icons/laravel/laravel-plain-wordmark.svg" />>
<img align="center" alt="PHP" height="30" width="40" src="https://raw.githubusercontent.com/devicons/devicon/1119b9f84c0290e0f0b38982099a2bd027a48bf1/icons/php/php-original.svg" />
<img align="center" alt="Boostrap" height="30" width="40" src="https://raw.githubusercontent.com/devicons/devicon/1119b9f84c0290e0f0b38982099a2bd027a48bf1/icons/bootstrap/bootstrap-original.svg" />
<br/> <br/>

## About the User List
<br/>

User List's Initial Information:

User List consuming user data API, using the PHP framework Laravel for development of this application; Bootstrap was also used for a better looking page and table.

<br/>

## Objective

Develop a program using the Laravel framework to consume the following API: https://run.mocky.io/v3/ce47ee53-6531-4821-a6f6-71a188eaaee0
It should also display user data in a paginated table, using either CSS or CSS frameworks such as Bootstrap.

<br/>

# Setting the Route

Defines two GET routes to the application root in Laravel. The first route returns the 'index' view when accessed. 
The second route calls the 'index' method of the 'UserController' controller when accessed. However, since both routes have the same path, only the second route will actually be registered and used.

```php
Route::get('/', function () {
    return view('index');
});

Route::get('/', [UserController::class, 'index']);
```
<br/>

# Setting the UserController WebClient

The controller retrieves user data from an external API, creates a collection of that data, and then breaks it into pages using Laravel's paginator. 
The paginated data is then passed to the 'index' view to be displayed.

```php
class UserController extends Controller
{
    public function index()
    {
        //Make a HTTP request to the API to retrieve user data
        $response = Http::get('https://run.mocky.io/v3/ce47ee53-6531-4821-a6f6-71a188eaaee0');
        $data = $response->json();

        // Access the 'users' key in the JSON response
        $users = $data['users'];

        // Create a collection from the user data
        $users = collect($users);

        // Get the current page
        $page = Paginator::resolveCurrentPage();

        // Define the number of items to show per page
        $perPage = 10;

        // Slice the collection to get the items to display on the current page
        $currentPageUsers = $users->slice(($page - 1) * $perPage, $perPage)->all();

        // Create a paginator for the sliced collection
        $users = new LengthAwarePaginator($currentPageUsers, count($users), $perPage);

        // Pass the paginated collection to the view
        return view('index', ['users' => $users]);
    }
}
```
I will explain step by step some of the methods used:

1 - links: This method is called on an instance of the Laravel paginator and generates pagination links for the paginated collection.
<br/>
2 - Paginator::resolveCurrentPage: This static method of Laravel's Paginator class determines the current page based on the incoming request.
<br/>
3 - Http::get: This static method of Laravel's Http class makes an HTTP GET request to the specified URL and returns a response.
<br/>
4 - $response->json: This method is called on an HTTP response instance and returns the response body as an associative array.
<br/>
5 - slice: This method is called on a Laravel collection instance and returns a slice of the collection with the specified items.
<br/>
6 - all: This method is called on a Laravel collection instance and returns all items in the collection as an array.
<br/>
7 - new LengthAwarePaginator: This constructor creates a new instance of Laravel's LengthAwarePaginator class, which is used to paginate a collection of items.
<br/>
8 - return view: returns a rendered view named 'index' and passes the $users variable to the view as an associative array with the key 'users'. This allows the view to access user data using the $users variable.

<br/>

# Finishing the View

This is a view file in Laravel that displays a responsive table of users. It uses the Bootstrap CSS framework for styling and includes custom styles for the table. 
The table is populated with user data passed to the view as the $users variable. The view also includes pagination links generated by the Laravel paginator.

```php
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
  <title>User List</title>
  <style>
    table {
        border-collapse: collapse;
    }

    th, td {
        border: 1px solid #ddd;
        padding: 8px;
    }
</style>
</head>
<body>
  <!-- Responsive table and its contents such as the users data -->
<div class="table-responsive">
    <table  class="table table-sm">
      <h1 class="display-4">User List</h1>
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Age</th>
                <th>Email</th>
            </tr>
        </thead>
        <tbody>
          <!-- foreach loop iterates over the $users data, creating a table row for each user -->
            @foreach ($users as $user)
                <tr>
                    <td>{{ $user['id'] }}</td>
                    <td>{{ $user['name'] }}</td>
                    <td>{{ $user['age'] }}</td>
                    <td>{{ $user['email'] }}</td>
                </tr>
            @endforeach
        </tbody>
    </table>
</div>

<!-- Generate pagination links (based on the current page and the total number of pages) and also make it look better  -->
{{ $users->links('pagination::bootstrap-4') }}

</body>
</html>
```

<br/>

# List's Pages: 

The initial page of the user list shows to its users the data retrieved by a Http request. It is separated with a pagination of 10 users per page, totaling 5 pages for all fifty users. 
Inside the table there's the users data such as the Id, Name, Age and Email of all fifty users.
<br/>
Used URL model: http://localhost:8000/?page=1
This is the expected result:

![InitialPage1](https://cdn.discordapp.com/attachments/1008741592779206666/1123817683004166204/image.png)
<br/>
<br/>
![InitialPage2](https://cdn.discordapp.com/attachments/1008741592779206666/1123818344269758594/image.png)
<br/>
<br/>
![InitialPage3](https://cdn.discordapp.com/attachments/1008741592779206666/1123818384421826651/image.png)
<br/>
<br/>
![InitialPage4](https://cdn.discordapp.com/attachments/1008741592779206666/1123818425190465566/image.png)
<br/>
<br/>
![InitialPage5](https://cdn.discordapp.com/attachments/1008741592779206666/1123818470358913104/image.png)
<br/>

<br/>

